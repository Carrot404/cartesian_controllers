my_cartesian_motion_controller:
    type: "position_controllers/CartesianMotionController"
    end_effector_link: "tool_screwdriver_tip_link"
    robot_base_link: "base_link"
    target_frame: "my_target"
    joints:
    - shoulder_pan_joint
    - shoulder_lift_joint
    - elbow_joint
    - wrist_1_joint
    - wrist_2_joint
    - wrist_3_joint

    solver:
        mass: 0.5
        inertia: 0.05

    pid_gains:
        trans_x: {p: 10.0, i: 0, d: 0}
        trans_y: {p: 10.0, i: 0, d: 0}
        trans_z: {p: 10.0, i: 0, d: 0}
        rot_x: {p: 1.0, i: 0, d: 0}
        rot_y: {p: 1.0, i: 0, d: 0}
        rot_z: {p: 1.0, i: 0, d: 0}

my_cartesian_force_controller:
    type: "position_controllers/CartesianForceController"
    end_effector_link: "tool_screwdriver_tip_link"
    robot_base_link: "base_link"
    ft_sensor_ref_link: "tool_screwdriver_tip_link"
    joints:
    - shoulder_pan_joint
    - shoulder_lift_joint
    - elbow_joint
    - wrist_1_joint
    - wrist_2_joint
    - wrist_3_joint

    solver:
        mass: 18
        inertia: 0.07

    # Center of mass w.r.t. ft_sensor_ref_link
    tool: {mass: 0.0, cog_x: 0, cog_y: 0, cog_z: 0.01}

    # w.r.t. robot_base_link
    gravity: {x: 0, y: 0, z: -9.82}

    pid_gains:
        trans_x: {p: 0.05, i: 0, d: 0}
        trans_y: {p: 0.05, i: 0, d: 0}
        trans_z: {p: 0.05, i: 0, d: 0}
        rot_x: {p: 0.01, i: 0, d: 0}
        rot_y: {p: 0.01, i: 0, d: 0}
        rot_z: {p: 0.01, i: 0, d: 0}

#my_cartesian_force_controller:
#   type: "velocity_controllers/CartesianForceController"
#   end_effector_link: "tool_screwdriver_tip_link"
#   robot_base_link: "base_link"
#   ft_sensor_ref_link: "tool_screwdriver_tip_link"
#   joints:
#   - shoulder_pan_joint
#   - shoulder_lift_joint
#   - elbow_joint
#   - wrist_1_joint
#   - wrist_2_joint
#   - wrist_3_joint
#
#   solver:
#       mass: 18
#       inertia: 0.07
#
#   pid_gains:
#       trans_x: {p: 0.40, i: 0, d: 0}
#       trans_y: {p: 0.40, i: 0, d: 0}
#       trans_z: {p: 0.40, i: 0, d: 0}
#       rot_x: {p: 0.04, i: 0, d: 0}
#       rot_y: {p: 0.04, i: 0, d: 0}
#       rot_z: {p: 0.04, i: 0, d: 0}

my_cartesian_compliance_controller:
    type: "position_controllers/CartesianComplianceController"
    end_effector_link: "tool_screwdriver_tip_link"    # All links above must come before this link
    robot_base_link: "base_link"
    ft_sensor_ref_link: "sensor_kms40"
    compliance_ref_link: "tool_screwdriver_tip_link"
    target_frame: "my_target"
    joints:
    - shoulder_pan_joint
    - shoulder_lift_joint
    - elbow_joint
    - wrist_1_joint
    - wrist_2_joint
    - wrist_3_joint

    stiffness:  # w.r.t. compliance_ref_link
        trans_x: 500
        trans_y: 500
        trans_z: 500
        rot_x: 100
        rot_y: 100
        rot_z: 100

    solver:
        mass: 18
        inertia: 0.07

    # Center of mass w.r.t. ft_sensor_ref_link
    tool: {mass: 0, com_x: 0, com_y: 0, com_z: 0}

    # w.r.t. robot_base_link
    gravity: {x: 0, y: 0, z: -9.82}

    pid_gains:
        trans_x: {p: 0.05, i: 0, d: 0}
        trans_y: {p: 0.05, i: 0, d: 0}
        trans_z: {p: 0.05, i: 0, d: 0}
        rot_x: {p: 0.01, i: 0, d: 0}
        rot_y: {p: 0.01, i: 0, d: 0}
        rot_z: {p: 0.01, i: 0, d: 0}

my_joint_to_cartesian_controller:
    type: "cartesian_controllers/JointControllerAdapter"
    end_effector_link: "tool_screwdriver_tip_link"
    robot_base_link: "base_link"
    published_target_name: "my_target"
    joints:
    - shoulder_pan_joint
    - shoulder_lift_joint
    - elbow_joint
    - wrist_1_joint
    - wrist_2_joint
    - wrist_3_joint

    joint_limits:
      shoulder_pan_joint:
        has_velocity_limits: true
        max_velocity: 3.15
        has_acceleration_limits: true
        max_acceleration: 10.0
      shoulder_lift_joint:
        has_velocity_limits: true
        max_velocity: 3.15
        has_acceleration_limits: true
        max_acceleration: 10.0
      elbow_joint:
        has_velocity_limits: true
        max_velocity: 3.15
        has_acceleration_limits: true
        max_acceleration: 10.0
      wrist_1_joint:
        has_velocity_limits: true
        max_velocity: 3.2
        has_acceleration_limits: true
        max_acceleration: 10.0
      wrist_2_joint:
        has_velocity_limits: true
        max_velocity: 3.2
        has_acceleration_limits: true
        max_acceleration: 10.0
      wrist_3_joint:
        has_velocity_limits: true
        max_velocity: 3.2
        has_acceleration_limits: true
        max_acceleration: 10.0

my_joint_to_cartesian_controller/joint_trajectory_controller:
    type: "position_controllers/JointTrajectoryController"
    joints:
    - shoulder_pan_joint
    - shoulder_lift_joint
    - elbow_joint
    - wrist_1_joint
    - wrist_2_joint
    - wrist_3_joint

joint_trajectory_controller:
    type: "position_controllers/JointTrajectoryController"
    joints:
    - shoulder_pan_joint
    - shoulder_lift_joint
    - elbow_joint
    - wrist_1_joint
    - wrist_2_joint
    - wrist_3_joint

joint_state_controller:
    type: joint_state_controller/JointStateController
    publish_rate: 50
